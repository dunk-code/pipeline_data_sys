(function(e){function t(t){for(var i,l,n=t[0],o=t[1],c=t[2],h=0,p=[];h<n.length;h++)l=n[h],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,n=1;n<a.length;n++){var o=a[n];0!==r[o]&&(i=!1)}i&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var i={},r={app:0},s=[];function l(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=i,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=o;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},2101:function(e,t,a){"use strict";a("f4bf")},"3aff":function(e,t,a){},5498:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("2b0e"),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("el-header",[e._v("管道公司数据标准管理平台")]),t("router-view")],1)},s=[],l=(a("fd3b"),a("2877")),n={},o=Object(l["a"])(n,r,s,!1,null,null,null),c=o.exports,u=a("8c4f"),h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("el-container",{staticStyle:{height:"100%"}},[t("el-aside",{staticClass:"aside",attrs:{width:"300px"}},[t("div",{staticClass:"search"},[t("el-input",{staticClass:"ipt",attrs:{placeholder:"请输入编号,如G0101"},model:{value:e.identifier,callback:function(t){e.identifier=t},expression:"identifier"}}),t("el-button",{staticClass:"btn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),t("div",{staticClass:"menu"},[t("el-menu",{attrs:{"default-openeds":e.keyPath,"unique-opened":!0,"default-active":e.categoryId,"active-text-color":"#409eff"},on:{open:e.handleOpen,close:e.handleClose,select:e.getSelect}},e._l(e.categoryList,(function(a){return t("el-submenu",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[t("template",{slot:"title"},[e._v(e._s(a.category.identifier+"_"+a.category.title))]),e._l(a.sonCategory,(function(a){return[null!=a.sonCategory&&a.sonCategory.length>0?t("el-submenu",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[t("template",{slot:"title"},[e._v(e._s(a.category.identifier+"_"+a.category.title))]),e._l(a.sonCategory,(function(a){return[null!=a.sonCategory&&a.sonCategory.length>0?t("el-submenu",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[t("template",{slot:"title"},[e._v(e._s(a.category.identifier+"_"+a.category.title))]),e._l(a.sonCategory,(function(a){return t("el-menu-item",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[e._v(e._s(a.category.identifier+"_"+a.category.title))])}))],2):t("el-menu-item",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[t("template",{slot:"title"},[e._v(e._s(a.category.identifier+"_"+a.category.title))])],2)]}))],2):t("el-menu-item",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[t("template",{slot:"title"},[e._v(e._s(a.category.identifier+"_"+a.category.title))])],2)]}))],2)})),1)],1),t("div",{staticClass:"mapping"},[t("router-link",{attrs:{to:"/search"}},[e._v("匹配")])],1)]),t("el-main",[t("div",{staticClass:"tableHeader"},[e._v(" "+e._s(e.tabName||"表名")+" ")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.tableData,stripe:"",border:"",height:"500","min-height":"calc(100% - 100px)","max-height":"calc(100% - 100px)"}},[e._v(" border > "),t("af-table-column",{attrs:{prop:"id",label:"序号"}}),t("af-table-column",{attrs:{prop:"englishName",label:"英文名称"}}),t("af-table-column",{attrs:{prop:"chineseName",label:"中文名称"}}),t("af-table-column",{attrs:{prop:"description",label:"字段描述"}}),t("af-table-column",{attrs:{prop:"unit",label:"单位"}}),t("af-table-column",{attrs:{prop:"typePrecision",label:"类型与精度"}}),t("af-table-column",{attrs:{prop:"rangeConstraint",label:"值域/约束"}})],1),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)],1)},p=[],d={name:"Home",components:{},data(){return{identifier:"",categoryList:[],keyPath:[],tableData:[],tabName:"",categoryId:null,pageSize:200,total:200,loading:!1,currentPage:1}},created(){this.getCategoryList()},methods:{getCategoryList(){this.$axios({method:"get",url:"/pipeline_data_sys/category/list"}).then(e=>{this.categoryList=e.data}).catch(e=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})})},search(){""==this.identifier?this.$message({type:"warning",message:"请输入编号",duration:3e3,showClose:!0}):this.$axios({url:`/pipeline_data_sys/category/${this.identifier}/search`}).then(e=>{0==e.data.length?this.$message({type:"warning",message:"请输入正确的编号",duration:3e3,showClose:!0}):(this.keyPath=e.data,this.categoryId=this.keyPath[this.keyPath.length-1],this.getSelect(this.categoryId,this.keyPath),this.$forceUpdate())}).catch(e=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})})},handleOpen(e,t){this.categoryId=e,this.keyPath=t},getSelect(e,t){this.categoryId=e,this.keyPath=t,this.getTableData(this.categoryId)},getTableData(e){this.loading=!0,this.$nextTick(()=>{this.$refs.table.bodyWrapper.scrollTop=0}),this.$axios({method:"get",url:"/pipeline_data_sys/attribute/"+e,params:{pageSize:this.pageSize/10}}).then(e=>{this.total=100,0!=e.data.length?(this.tableData=e.data.attributes,this.tabName=this.tableData[0].tabName,this.total=10*e.data.total):this.tableData=[]}).catch(e=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})}).finally(()=>{setTimeout(()=>{this.loading=!1},400)})},handleClose(){},handleCurrentChange(e){this.loading=!0,this.$nextTick(()=>{this.$refs.table.bodyWrapper.scrollTop=0}),this.$axios({url:"/pipeline_data_sys/attribute/"+this.categoryId,params:{pageNum:e,pageSize:this.pageSize/10}}).then(e=>{setTimeout(()=>{this.loading=!1},400),this.tableData=e.data.attributes}).catch(e=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})})}}},g=d,f=(a("8d7c"),Object(l["a"])(g,h,p,!1,null,"4a67c5e1",null)),m=f.exports,b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search"},[t("div",{staticClass:"mapping"},[t("el-select",{staticClass:"select",attrs:{placeholder:"请选择匹配的字段类型"},model:{value:e.colName,callback:function(t){e.colName=t},expression:"colName"}},e._l(e.colsList,(function(e){return t("el-option",{key:e.col,attrs:{label:e.col,value:e.name}})})),1),t("el-input",{staticClass:"ipt",attrs:{placeholder:"请输入要匹配的字段值"},model:{value:e.colValue,callback:function(t){e.colValue=t},expression:"colValue"}}),t("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("匹配")])],1),t("div",{staticClass:"dataShow"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"700","max-height":"calc(100% - 60px)","min-height":"calc(100% - 60px)",border:"",stripe:""}},[t("af-table-column",{attrs:{prop:"id",label:"序号"}}),t("af-table-column",{attrs:{prop:"identifier",label:"编号"}}),t("af-table-column",{attrs:{prop:"title",label:"类别"}}),t("af-table-column",{attrs:{prop:"englishName",label:"英文名称"}}),t("af-table-column",{attrs:{prop:"chineseName",label:"中文名称"}}),t("af-table-column",{attrs:{prop:"description",label:"字段描述"}}),t("af-table-column",{attrs:{prop:"unit",label:"单位"}}),t("af-table-column",{attrs:{prop:"typePrecision",label:"类型与精度"}}),t("af-table-column",{attrs:{prop:"rangeConstraint",label:"值域/约束"}})],1),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)])},y=[],v={name:"Search",data(){return{colsList:[],colName:"",colValue:"",tableData:[],loading:!1,currentPage:1,pageSize:200,total:200}},components:{},computed:{},created(){this.getColsList()},methods:{getColsList(){this.$axios({url:"/pipeline_data_sys/attribute/cols"}).then(e=>{this.colsList=e.data}).catch(e=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})})},search(){""==this.colName?this.$message({type:"error",message:"请选择要匹配的字段类型",duration:3e3,showClose:!0}):""==this.colValue?this.$message({type:"error",message:"请输入要匹配的字段值",duration:3e3,showClose:!0}):(this.loading=!0,this.$nextTick(()=>{this.$refs.table.bodyWrapper.scrollTop=0}),this.$axios({url:`/pipeline_data_sys/attribute/${this.colName}/search/${this.colValue}`,params:{pageSize:this.pageSize/10}}).then(e=>{this.tableData=[],0!=e.data.length?(this.total=10*e.data[0].total,e.data.forEach(e=>{e.attributes.forEach(t=>{t.title=e.title,t.identifier=e.identifier}),this.tableData=this.tableData.concat(e.attributes)})):this.$message({type:"info",message:"未找到匹配数据",duration:3e3,showClose:!0})}).catch(e=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})}).finally(()=>{setTimeout(()=>{this.loading=!1},400)}))},handleCurrentChange(e){this.loading=!0,this.$nextTick(()=>{this.$refs.table.bodyWrapper.scrollTop=0}),this.$axios({url:`/pipeline_data_sys/attribute/${this.colName}/search/${this.colValue}`,params:{pageNum:e,pageSize:this.pageSize/10}}).then(e=>{this.tableData=[],e.data.forEach(e=>{e.attributes.forEach(t=>{t.title=e.title,t.identifier=e.identifier}),this.tableData=this.tableData.concat(e.attributes)}),setTimeout(()=>{this.loading=!1},400)}).catch(e=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})})}}},_=v,C=(a("2101"),Object(l["a"])(_,b,y,!1,null,"1acd212f",null)),x=C.exports;i["default"].use(u["a"]);const w=[{path:"/",name:"Home",component:m},{path:"/search",name:"Search",component:x}],$=new u["a"]({mode:"hash",base:"/",routes:w});var k=$,S=a("5c96"),P=a.n(S),N=(a("0fae"),a("b06b")),T=a.n(N),D=(a("3aff"),a("e382"),a("bc3a")),O=a.n(D);i["default"].config.productionTip=!1,i["default"].use(P.a),i["default"].use(T.a),O.a.defaults.baseURL="http://www.dunkcode.cn:8080",O.a.defaults.timeout=5e3,i["default"].prototype.$axios=O.a,new i["default"]({router:k,render:e=>e(c)}).$mount("#app")},"78d6":function(e,t,a){},"8d7c":function(e,t,a){"use strict";a("78d6")},e382:function(e,t,a){},f4bf:function(e,t,a){},fd3b:function(e,t,a){"use strict";a("5498")}});
//# sourceMappingURL=app.f387e27a.js.map