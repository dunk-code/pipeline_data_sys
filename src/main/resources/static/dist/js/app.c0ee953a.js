(function(t){function e(e){for(var o,r,s=e[0],n=e[1],c=e[2],p=0,u=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);h&&h(e);while(u.length)u.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var t,e=0;e<l.length;e++){for(var a=l[e],o=!0,s=1;s<a.length;s++){var n=a[s];0!==i[n]&&(o=!1)}o&&(l.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},i={app:0},l=[];function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],n=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var h=n;l.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1759:function(t,e,a){"use strict";a("1b38")},"1b38":function(t,e,a){},"3aff":function(t,e,a){},"4f91":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var o=a("2b0e"),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("el-header",[t._v("管道公司数据标准管理平台")]),e("router-view")],1)},l=[],r=(a("6bcf"),a("2877")),s={},n=Object(r["a"])(s,i,l,!1,null,null,null),c=n.exports,h=a("8c4f"),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("el-container",{staticStyle:{height:"100%"}},[e("el-aside",{staticClass:"aside",attrs:{width:"300px"}},[e("div",{staticClass:"search"},[e("el-input",{staticClass:"ipt",attrs:{placeholder:"请输入类别名"},model:{value:t.categoryName,callback:function(e){t.categoryName=e},expression:"categoryName"}}),e("el-button",{staticClass:"btn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1),e("div",{staticClass:"menu"},[e("el-menu",{attrs:{"default-openeds":t.keyPath,"unique-opened":!0,"default-active":t.categoryId,"active-text-color":"#409eff"},on:{open:t.handleOpen,close:t.handleClose,select:t.getSelect}},t._l(t.categoryList,(function(a){return e("el-submenu",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[e("template",{slot:"title"},[t._v(t._s(a.category.identifier+"_"+a.category.title))]),t._l(a.sonCategory,(function(a){return[null!=a.sonCategory&&a.sonCategory.length>0?e("el-submenu",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[e("template",{slot:"title"},[t._v(t._s(a.category.identifier+"_"+a.category.title))]),t._l(a.sonCategory,(function(a){return[null!=a.sonCategory&&a.sonCategory.length>0?e("el-submenu",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[e("template",{slot:"title"},[t._v(t._s(a.category.identifier+"_"+a.category.title))]),t._l(a.sonCategory,(function(a){return e("el-menu-item",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[t._v(t._s(a.category.identifier+"_"+a.category.title))])}))],2):e("el-menu-item",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[e("template",{slot:"title"},[t._v(t._s(a.category.identifier+"_"+a.category.title))])],2)]}))],2):e("el-menu-item",{key:a.category.identifier,attrs:{index:String(a.category.id)}},[e("template",{slot:"title"},[t._v(t._s(a.category.identifier+"_"+a.category.title))])],2)]}))],2)})),1)],1),e("div",{staticClass:"mapping"},[e("router-link",{attrs:{to:"/search"}},[t._v("匹配")])],1)]),e("el-main",[e("div",{staticClass:"tableHeader"},[t._v(" "+t._s(t.tabName||"表名")+" ")]),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{data:t.tableData,"table-layout":"auto",stripe:"",border:"",height:"500","min-height":"calc(100% - 100px)","max-height":"calc(100% - 100px)","header-cell-style":{background:"#a6c3e2",color:"#fff"}}},[e("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"80","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"englishName",label:"英文名称","min-width":"150","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"chineseName",label:"中文名称","min-width":"120","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"description",label:"字段描述","min-width":"250","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"unit",label:"单位","min-width":"80","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"typePrecision",label:"类型与精度","min-width":"100","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"rangeConstraint",label:"值域/约束","min-width":"220","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"referenceVariable",label:"引用变量","min-width":"100","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"typeCode",label:"类别码","min-width":"80","show-overflow-tooltip":""}})],1),e("div",{staticClass:"block"},[e("el-button",{staticStyle:{height:"100%",width:"100px"},attrs:{type:"primary"}},[t._v("导入新标准"),e("i",{staticClass:"el-icon-upload el-icon--right"})]),e("el-button",{staticStyle:{height:"100%",width:"100px"},attrs:{type:"primary",icon:"el-icon-share"}},[t._v("导出新标准")])],1)],1)],1)],1)},u=[],d={name:"Home",components:{},data(){return{categoryName:"",categoryList:[],keyPath:[],tableData:[],tabName:"",categoryId:null,loading:!1}},created(){this.getCategoryList()},methods:{getCategoryList(){this.$axios({method:"get",url:"/pipeline_data_sys/category/list"}).then(t=>{this.categoryList=t.data}).catch(t=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})})},search(){""==this.categoryName?this.$message({type:"warning",message:"请输入类别名",duration:3e3,showClose:!0}):this.$axios({url:`/pipeline_data_sys/category/${this.categoryName}/search`}).then(t=>{0==t.data.length?this.$message({type:"warning",message:"请输入正确的类别名",duration:3e3,showClose:!0}):(this.keyPath=t.data,this.categoryId=this.keyPath[this.keyPath.length-1],this.getSelect(this.categoryId,this.keyPath),this.$forceUpdate())}).catch(t=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})})},handleOpen(t,e){this.categoryId=t,this.keyPath=e},getSelect(t,e){this.categoryId=t,this.keyPath=e,this.getTableData(this.categoryId)},getTableData(t){this.loading=!0,this.$nextTick(()=>{this.$refs.table.bodyWrapper.scrollTop=0}),this.$axios({method:"get",url:`/pipeline_data_sys/attribute/${t}/list`}).then(t=>{0!=t.data.attributes.length?(this.tableData=t.data.attributes,this.tabName=this.tableData[0].tabName):this.tableData=[]}).catch(t=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})}).finally(()=>{setTimeout(()=>{this.loading=!1},400)})},handleClose(){},handleCurrentChange(t){this.loading=!0,this.$nextTick(()=>{this.$refs.table.bodyWrapper.scrollTop=0}),this.$axios({url:"/pipeline_data_sys/attribute/"+this.categoryId}).then(t=>{setTimeout(()=>{this.loading=!1},400),this.tableData=t.data.attributes}).catch(t=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})})}}},g=d,m=(a("1759"),Object(r["a"])(g,p,u,!1,null,"52df09db",null)),f=m.exports,b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("div",{staticClass:"mapping"},[e("el-select",{staticClass:"select",attrs:{placeholder:"请选择匹配的字段类型"},model:{value:t.colName,callback:function(e){t.colName=e},expression:"colName"}},t._l(t.colsList,(function(t){return e("el-option",{key:t.col,attrs:{label:t.col,value:t.name}})})),1),e("el-input",{staticClass:"ipt",attrs:{placeholder:"请输入要匹配的字段值"},model:{value:t.colValue,callback:function(e){t.colValue=e},expression:"colValue"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("匹配")])],1),e("div",{staticClass:"dataShow"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"700","max-height":"calc(100% - 60px)","min-height":"calc(100% - 60px)",border:"",stripe:"","header-cell-style":{background:"#a6c3e2",color:"#fff"}}},[e("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"80","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"identifier",label:"编号","min-width":"120","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"title",label:"类别","min-width":"120","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"englishName",label:"英文名称","min-width":"200","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"chineseName",label:"中文名称","min-width":"150","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"description",label:"字段描述","min-width":"250","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"unit",label:"单位","min-width":"80","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"typePrecision",label:"类型与精度","min-width":"100","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"rangeConstraint",label:"值域/约束","min-width":"220","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"referenceVariable",label:"引用变量","min-width":"100","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"typeCode",label:"类别码","min-width":"80","show-overflow-tooltip":""}})],1),e("div",{staticClass:"block"},[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1)])},y=[],w={name:"Search",data(){return{colsList:[],colName:"",colValue:"",tableData:[],loading:!1,currentPage:1,pageSize:200,total:200}},components:{},computed:{},created(){this.getColsList()},methods:{getColsList(){this.$axios({url:"/pipeline_data_sys/attribute/cols"}).then(t=>{this.colsList=t.data}).catch(t=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})})},search(){""==this.colName?this.$message({type:"error",message:"请选择要匹配的字段类型",duration:3e3,showClose:!0}):""==this.colValue?this.$message({type:"error",message:"请输入要匹配的字段值",duration:3e3,showClose:!0}):(this.loading=!0,this.$nextTick(()=>{this.$refs.table.bodyWrapper.scrollTop=0}),this.$axios({url:`/pipeline_data_sys/attribute/${this.colName}/search/${this.colValue}`,params:{pageSize:this.pageSize/10}}).then(t=>{this.tableData=[],0!=t.data.length?(this.total=10*t.data[0].total,t.data.forEach(t=>{t.attributes.forEach(e=>{e.title=t.title,e.identifier=t.identifier}),this.tableData=this.tableData.concat(t.attributes)})):this.$message({type:"info",message:"未找到匹配数据",duration:3e3,showClose:!0})}).catch(t=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})}).finally(()=>{setTimeout(()=>{this.loading=!1},400)}))},handleCurrentChange(t){this.loading=!0,this.$nextTick(()=>{this.$refs.table.bodyWrapper.scrollTop=0}),this.$axios({url:`/pipeline_data_sys/attribute/${this.colName}/search/${this.colValue}`,params:{pageNum:t,pageSize:this.pageSize/10}}).then(t=>{this.tableData=[],t.data.forEach(t=>{t.attributes.forEach(e=>{e.title=t.title,e.identifier=t.identifier}),this.tableData=this.tableData.concat(t.attributes)}),setTimeout(()=>{this.loading=!1},400)}).catch(t=>{this.$message({type:"error",message:"网络出错了",duration:3e3,showClose:!0})})}}},v=w,_=(a("73f1"),Object(r["a"])(v,b,y,!1,null,"442cefb9",null)),C=_.exports;o["default"].use(h["a"]);const x=[{path:"/",name:"Home",component:f},{path:"/search",name:"Search",component:C}],$=new h["a"]({mode:"hash",base:"/",routes:x});var k=$,S=a("5c96"),N=a.n(S),P=(a("0fae"),a("b06b")),T=a.n(P),D=(a("3aff"),a("e382"),a("bc3a")),O=a.n(D);o["default"].config.productionTip=!1,o["default"].use(N.a),o["default"].use(T.a),O.a.defaults.baseURL="http://www.dunkcode.cn:8080",O.a.defaults.timeout=5e3,o["default"].prototype.$axios=O.a,new o["default"]({router:k,render:t=>t(c)}).$mount("#app")},"6bcf":function(t,e,a){"use strict";a("4f91")},"73f1":function(t,e,a){"use strict";a("7db1")},"7db1":function(t,e,a){},e382:function(t,e,a){}});
//# sourceMappingURL=app.c0ee953a.js.map